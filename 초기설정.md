# 초기설정

본 문서는 n2ser의 배포와 운영을 위해 초기에 필요한 과정들을 정리한 것이다.

## AWS 계정 설정

AWS 계정은 루트 계정과 IAM 계정으로 나뉜다.

- 루트 계정: AWS에 돈을 지불하며 사용하는 사용자의 계정으로 모든 기능 사용 가능
- IAM 계정: 루트 계정에 의해 등록되어 정해진 업무만이 가능하도록 권한을 제한한 계정

루트 계정으로 로그인한 후 IAM 메뉴에서 IAM 계정을 발급할 사용자와 사용자 그룹을 등록할 수 있다.

부여할 권한은 정책 메뉴에서 결정할 수 있으며 약 900여개의 정책 중 부여할 정책들을 선택해서 새로운 정책으로 만들 수 있으며 이 정책을 특정 사용자나 사용자 그룹에 부여할 수 있다.

n2server의 배포 운영을 위해서는 다음과 같은 권한이 필요하다.

- EC2: aws의 컴퓨팅 인스턴스인 ec2에 관한 권한
- Elastic Container Registry: 도커 이미지를 저장할 저장소 사용 권한
- Elastic Container Service: ECR에 등록된 이미지를 바탕으로 서비스 생성/관리 권한
- IAM: cli 사용을 위한 사용자 인증에 관한 권한

IAM 사용자를 등록하고 필요하다면 사용자 그룹에도 등록한다. IAM 사용자가 AWS 콘솔에 접속하기 위해서는 엑세스 키가 필요하며 IAM > 엑세스 관리 > 사용자 페이지의 보안 자격증명 메뉴의 액세스 키 항목에서 엑세스 키를 만들 수 있다.

생성된 액세스 키는 csv 파일로 다운로드 되며 다음과 같은 내용이 담겨 있다.
Access key ID: AKIAY7UN7ASNSR6CYWMQ
Secret access key: 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

상기 ID와 비밀키를 통해 aws 콘솔에 IAM 계정으로 접근이 가능하다.

- csv 파일을 생성 단계에서 한번만 다운로드가 가능하므로 잘 관리해야 하며, 분실시에는 다시 발급한다.
- 이 키는 터미널 상에서 aws cli나 esc-cli를 통해 작업을 할 때에도 활용된다.
